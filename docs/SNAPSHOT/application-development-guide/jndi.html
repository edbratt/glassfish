
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Using the Java Naming and Directory Interface</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
<table id="doc-title" cellspacing="0" cellpadding="0">
  <tr>
  <td align="left" valign="top">
  <b>Using the Java Naming and Directory Interface</b><br />
      <p class="beta">DRAFT</p>
  </td>
  </tr>
</table>
<hr />

<table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
	<colgroup>
		<col width="12%"/>
		<col width="12%"/>
		<col width="*"/>
	</colgroup>
	<tr>
		<td align="left">
		<a href="transaction-service.html">
			<span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Previous</span>
		</a>
		</td>

		<td align="left">
		<a href="jms.html">
			<span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Next</span>
		</a>
		</td>

		<td align="right">
		<a href="toc.html">
			<span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Contents</span>
		</a>
		</td>
	</tr>
</table>


<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a id="GSDVG00019"></a><a id="beanr"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-the-java-naming-and-directory-interface">16 Using the Java Naming and Directory Interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A naming service maintains a set of bindings, which relate names to
objects. The Java EE naming service is based on the Java Naming and
Directory Interface (JNDI) API. The JNDI API allows application
components and clients to look up distributed resources, services, and
EJB components. For general information about the JNDI API, see
<code>http://www.oracle.com/technetwork/java/jndi/index.html</code>. You can also
see the JNDI tutorial at <code>http://docs.oracle.com/javase/jndi/tutorial/</code>.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#beans">Accessing the Naming Context</a></p>
</li>
<li>
<p><a href="#beanx">Configuring Resources</a></p>
</li>
<li>
<p><a href="#gcpge">Using a Custom <code>jndi.properties</code> File</a></p>
</li>
<li>
<p><a href="#beaoa">Mapping References</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The Web Profile of the GlassFish Server supports the EJB 3.1 Lite
specification, which allows enterprise beans within web applications,
among other features. The full GlassFish Server supports the entire EJB
3.1 specification. For details, see
<a href="http://jcp.org/en/jsr/detail?id=318">JSR 318</a>
(<code>http://jcp.org/en/jsr/detail?id=318</code>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a id="beans"></a><a id="GSDVG00192"></a><a id="accessing-the-naming-context"></a></p>
</div>
<div class="sect2">
<h3 id="_accessing_the_naming_context">Accessing the Naming Context</h3>
<div class="paragraph">
<p>The Oracle GlassFish Server provides a naming environment, or context,
which is compliant with standard Java EE requirements. A <code>Context</code>
object provides the methods for binding names to objects, unbinding
names from objects, renaming objects, and listing the bindings. The
<code>InitialContext</code> is the handle to the Java EE naming service that
application components and clients use for lookups.</p>
</div>
<div class="paragraph">
<p>The JNDI API also provides subcontext functionality. Much like a
directory in a file system, a subcontext is a context within a context.
This hierarchical structure permits better organization of information.
For naming services that support subcontexts, the <code>Context</code> class also
provides methods for creating and destroying subcontexts.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#BGBJGGAD">Portable Global JNDI Names</a></p>
</li>
<li>
<p><a href="#gcjkd">GlassFish Server V2 Vendor-Specific Global JNDI Names</a></p>
</li>
<li>
<p><a href="#gkndi">Disabling GlassFish Server V2 JNDI Names</a></p>
</li>
<li>
<p><a href="#beanu">Accessing EJB Components Using the <code>CosNaming</code> Naming
Context</a></p>
</li>
<li>
<p><a href="#beanv">Accessing EJB Components in a Remote GlassFish Server</a></p>
</li>
<li>
<p><a href="#beanw">Naming Environment for Lifecycle Modules</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Each resource within a server instance must have a unique name. However,
two resources in different server instances or different domains can
have the same name.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a id="BGBJGGAD"></a><a id="GSDVG560"></a><a id="portable-global-jndi-names"></a></p>
</div>
<div class="sect3">
<h4 id="_portable_global_jndi_names">Portable Global JNDI Names</h4>
<div class="paragraph">
<p>If an EJB component is a kind of session bean and it is deployed to any
implementation supporting the EJB 3.1specification (for example,
GlassFish Server 5.0), it automatically has one or more portable JNDI
names defined based on the syntax in the specification. Note that this
is true of existing EJB 3.0 and 2.x applications that are deployed to an
implementation supporting EJB 3.1. No code changes are required to the
bean class itself in order to have the portable global JNDI name
automatically assigned when deployed to an EJB 3.1 container.</p>
</div>
<div class="paragraph">
<p>For more information, see the Java EE 8 Platform Specification, section
EE.5.2.2, "Application Component Environment Namespaces"
(<code>http://jcp.org/en/jsr/detail?id=366</code>), and the EJB 3.1 Specification,
section 4.4, "Global JNDI Access"
(<code>http://jcp.org/en/jsr/detail?id=318</code>).</p>
</div>
<div class="paragraph">
<p>If the <code>disable-nonportable-jndi-names</code> property is set to false (the
default), a GlassFish Server V2-specific JNDI name is assigned in
addition to a portable global JNDI name. For more information, see
<a href="#gcjkd">GlassFish Server V2 Vendor-Specific Global JNDI Names</a> and
<a href="#gkndi">Disabling GlassFish Server V2 JNDI Names</a>.</p>
</div>
<div class="paragraph">
<p><a id="gcjkd"></a><a id="GSDVG00519"></a><a id="glassfish-server-v2-vendor-specific-global-jndi-names"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_glassfish_server_v2_vendor_specific_global_jndi_names">GlassFish Server V2 Vendor-Specific Global JNDI Names</h4>
<div class="paragraph">
<p>GlassFish Server v2 vendor-specific global JNDI names are assigned
according to the following precedence rules:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A global JNDI name assigned in the <code>glassfish-ejb-jar.xml</code>,
<code>glassfish-web.xml</code>, or <code>glassfish-application-client.xml</code> deployment
descriptor file has the highest precedence. See <a href="#beaoa">Mapping
References</a>.</p>
</li>
<li>
<p>A global JNDI name assigned in a <code>mapped-name</code> element in the
<code>ejb-jar.xml</code>, <code>web.xml</code>, or <code>application-client.xml</code> deployment
descriptor file has the second highest precedence. The following
elements have <code>mapped-name</code> subelements: <code>resource-ref</code>,
<code>resource-env-ref</code>, <code>ejb-ref</code>, <code>message-destination</code>,
<code>message-destination-ref</code>, <code>session</code>, <code>message-driven</code>, and <code>entity</code>.</p>
</li>
<li>
<p>A global JNDI name assigned in a <code>mappedName</code> attribute of an
annotation has the third highest precedence. The following annotations
have <code>mappedName</code> attributes: <code>@jakarta.annotation.Resource</code>,
<code>@javax.ejb.EJB</code>, <code>@javax.ejb.Stateless</code>, <code>@javax.ejb.Singleton</code>,
<code>@javax.ejb.Stateful</code>, and <code>@javax.ejb.MessageDriven</code>.</p>
</li>
<li>
<p>In most cases, a default global JNDI name is assigned (and recorded
in the server log) if no name is assigned in deployment descriptors or
annotations.</p>
<div class="ulist">
<ul>
<li>
<p>For a session or entity bean, a GlassFish Server V2-specific JNDI name
is assigned as follows:</p>
<div class="ulist">
<ul>
<li>
<p>For an EJB 2.x dependency or a session or entity bean with a remote
interface, the default is the fully qualified name of the home
interface.</p>
</li>
<li>
<p>For an EJB 3.0 dependency or a session bean with a remote interface,
the default is the fully qualified name of the remote business
interface.</p>
</li>
<li>
<p>If both EJB 2.x and EJB 3.0 remote interfaces are specified, or if
more than one 3.0 remote interface is specified, there is no GlassFish
Server V2-specific default. For an entity bean, a global JNDI name must
be assigned.</p>
</li>
</ul>
</div>
</li>
<li>
<p>For all other component dependencies that must be mapped to global
JNDI names, the default is the name of the dependency relative to
<code>java:comp/env</code>. For example, in the
<code>@Resource(name="jdbc/Foo") DataSource ds;</code> annotation, the global JNDI
name is <code>jdbc/Foo</code>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="gkndi"></a><a id="GSDVG00526"></a><a id="disabling-glassfish-server-v2-jndi-names"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_disabling_glassfish_server_v2_jndi_names">Disabling GlassFish Server V2 JNDI Names</h4>
<div class="paragraph">
<p>The EJB 3.1 specification supported by GlassFish Server 5.0 defines
portable EJB JNDI names for session beans. Because of this, there is
less need to continue to use older vendor-specific JNDI names.</p>
</div>
<div class="paragraph">
<p>By default, GlassFish Server V2-specific JNDI names are applied
automatically by GlassFish Server 5.0 for backward compatibility.
However, this can lead to some ease-of-use issues. For example,
deploying two different applications containing a remote EJB component
that exposes the same remote interface causes a conflict between the
default JNDI names.</p>
</div>
<div class="paragraph">
<p>The default handling of V2-specific JNDI names in GlassFish Server 5.0
can be managed by using the <code>asadmin</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; set server.ejb-container.property.disable-nonportable-jndi-names="true"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>disable-nonportable-jndi-names</code> property is a boolean flag that can
take the following values:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>false</code></dt>
<dd>
<p>Enables the automatic use of GlassFish Server V2-specific JNDI names
in addition to portable global JNDI names. This is the default
setting.</p>
</dd>
<dt class="hdlist1"><code>true</code></dt>
<dd>
<p>Disables the automatic use of V2-specific JNDI names. In all cases,
only portable global JNDI names are used.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Note that this setting applies to all session beans deployed to the
server.</p>
</div>
<div class="paragraph">
<p><a id="beanu"></a><a id="GSDVG00520"></a><a id="accessing-ejb-components-using-the-cosnaming-naming-context"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_accessing_ejb_components_using_the_code_cosnaming_code_naming_context">Accessing EJB Components Using the <code>CosNaming</code> Naming Context</h4>
<div class="paragraph">
<p>The preferred way of accessing the naming service, even in code that
runs outside of a Java EE container, is to use the no-argument
<code>InitialContext</code> constructor. However, if EJB client code explicitly
instantiates an <code>InitialContext</code> that points to the <code>CosNaming</code> naming
service, it is necessary to set the <code>java.naming.factory.initial</code>
property to <code>org.glassfish.jndi.cosnaming.CNCtxFactory</code> in the client JVM
software when accessing EJB components. You can set this property using
the <code>asadmin create-jvm-options</code> command, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; create-jvm-options -Djava.naming.factory.initial=org.glassfish.jndi.cosnaming.CNCtxFactory</code></pre>
</div>
</div>
<div class="paragraph">
<p>For details about <code>asadmin create-jvm-options</code>, see the
<a href="../reference-manual/toc.html#GSRFM">GlassFish Server Open Source Edition Reference Manual</a>.</p>
</div>
<div class="paragraph">
<p>Or you can set this property in the code, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">Properties properties = null;
      try {
            properties = new Properties();
            properties.put("java.naming.factory.initial",
                  "org.glassfish.jndi.cosnaming.CNCtxFactory");
            ...
          }
      ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>java.naming.factory.initial</code> property applies to only one instance.
The property is not cluster-aware.</p>
</div>
<div class="paragraph">
<p><a id="beanv"></a><a id="GSDVG00521"></a><a id="accessing-ejb-components-in-a-remote-glassfish-server"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_accessing_ejb_components_in_a_remote_glassfish_server">Accessing EJB Components in a Remote GlassFish Server</h4>
<div class="paragraph">
<p>The recommended approach for looking up an EJB component in a remote
GlassFish Server from a client that is a servlet or EJB component is to
use the Interoperable Naming Service syntax. Host and port information
is prepended to any global JNDI names and is automatically resolved
during the lookup. The syntax for an interoperable global name is as
follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">corbaname:iiop:host:port#a/b/name</code></pre>
</div>
</div>
<div class="paragraph">
<p>This makes the programming model for accessing EJB components in another
GlassFish Server exactly the same as accessing them in the same server.
The deployer can change the way the EJB components are physically
distributed without having to change the code.</p>
</div>
<div class="paragraph">
<p>For Java EE components, the code still performs a <code>java:comp/env</code> lookup
on an EJB reference. The only difference is that the deployer maps the
<code>ejb-ref</code> element to an interoperable name in a GlassFish Server
deployment descriptor file instead of to a simple global JNDI name.</p>
</div>
<div class="paragraph">
<p>For example, suppose a servlet looks up an EJB reference using
<code>java:comp/env/ejb/Foo</code>, and the target EJB component has a global JNDI
name of <code>a/b/Foo</code>.</p>
</div>
<div class="paragraph">
<p>The <code>ejb-ref</code> element in <code>glassfish-web.xml</code> looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;ejb-ref&gt;
   &lt;ejb-ref-name&gt;ejb/Foo&lt;/ejb-ref-name&gt;
   &lt;jndi-name&gt;corbaname:iiop:host:port#a/b/Foo&lt;/jndi-name&gt;
&lt;/ejb-ref&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">Context ic = new InitialContext();
Object o = ic.lookup("java:comp/env/ejb/Foo");</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a client that doesn&#8217;t run within a Java EE container, the code just
uses the interoperable global name instead of the simple global JNDI
name. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">Context ic = new InitialContext();
Object o = ic.lookup("corbaname:iiop:host:port#a/b/Foo");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Objects stored in the interoperable naming context and
component-specific (<code>java:comp/env</code>) naming contexts are transient. On
each server startup or application reloading, all relevant objects are
re-bound to the namespace.</p>
</div>
<div class="paragraph">
<p><a id="beanw"></a><a id="GSDVG00522"></a><a id="naming-environment-for-lifecycle-modules"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_naming_environment_for_lifecycle_modules">Naming Environment for Lifecycle Modules</h4>
<div class="paragraph">
<p>Lifecycle listener modules provide a means of running short or long
duration tasks based on Java technology within the GlassFish Server
environment, such as instantiation of singletons or RMI servers. These
modules are automatically initiated at server startup and are notified
at various phases of the server life cycle. For details about lifecycle
modules, see <a href="lifecycle-listeners.html#beamc">Developing Lifecycle
Listeners</a>.</p>
</div>
<div class="paragraph">
<p>The configured properties for a lifecycle module are passed as
properties during server initialization (the <code>INIT_EVENT</code>). The initial
JNDI naming context is not available until server initialization is
complete. A lifecycle module can get the <code>InitialContext</code> for lookups
using the method <code>LifecycleEventContext.getInitialContext()</code> during, and
only during, the <code>STARTUP_EVENT</code>, <code>READY_EVENT</code>, or <code>SHUTDOWN_EVENT</code>
server life cycle events.</p>
</div>
<div class="paragraph">
<p><a id="beanx"></a><a id="GSDVG00193"></a><a id="configuring-resources"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_resources">Configuring Resources</h3>
<div class="paragraph">
<p>The GlassFish Server exposes special resources in the naming
environment.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#beany">External JNDI Resources</a></p>
</li>
<li>
<p><a href="#beanz">Custom Resources</a></p>
</li>
<li>
<p><a href="#giyvw">Built-in Factories for Custom Resources</a></p>
</li>
<li>
<p><a href="#gkpdn">Using Application-Scoped Resources</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beany"></a><a id="GSDVG00523"></a><a id="external-jndi-resources"></a></p>
</div>
<div class="sect3">
<h4 id="_external_jndi_resources">External JNDI Resources</h4>
<div class="paragraph">
<p>An external JNDI resource defines custom JNDI contexts and implements
the javax.naming.spi.InitialContextFactory interface. There is no
specific JNDI parent context for external JNDI resources, except for the
standard <code>java:comp/env/</code>.</p>
</div>
<div class="paragraph">
<p>Create an external JNDI resource in one of these ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To create an external JNDI resource using the Administration Console,
open the Resources component, open the JNDI component, and select
External Resources. For details, click the Help button in the
Administration Console.</p>
</li>
<li>
<p>To create an external JNDI resource, use the
<code>asadmin create-jndi-resource</code> command. For details, see the
<a href="../reference-manual/toc.html#GSRFM">GlassFish Server Open Source Edition Reference Manual</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beanz"></a><a id="GSDVG00524"></a><a id="custom-resources"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_custom_resources">Custom Resources</h4>
<div class="paragraph">
<p>A custom resource specifies a custom server-wide resource object factory
that implements the javax.naming.spi.ObjectFactory interface. There is
no specific JNDI parent context for external JNDI resources, except for
the standard <code>java:comp/env/</code>.</p>
</div>
<div class="paragraph">
<p>Create a custom resource in one of these ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To create a custom resource using the Administration Console, open the
Resources component, open the JNDI component, and select Custom
Resources. For details, click the Help button in the Administration
Console.</p>
</li>
<li>
<p>To create a custom resource, use the <code>asadmin create-custom-resource</code>
command. For details, see the <a href="../reference-manual/toc.html#GSRFM">GlassFish Server Open Source
Edition Reference Manual</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="giyvw"></a><a id="GSDVG00525"></a><a id="built-in-factories-for-custom-resources"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_built_in_factories_for_custom_resources">Built-in Factories for Custom Resources</h4>
<div class="paragraph">
<p>The GlassFish Server provides built-in factories for the following types
of custom resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#giywi">JavaBeanFactory</a></p>
</li>
<li>
<p><a href="#giysn">PropertiesFactory</a></p>
</li>
<li>
<p><a href="#giytz">PrimitivesAndStringFactory</a></p>
</li>
<li>
<p><a href="#giywh">URLFactory</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Template <code>glassfish-resources.xml</code> files for these built-in factories
and a <code>README</code> file are available at
as-install`/lib/install/templates/resources/custom/<code>. For more
information about the `glassfish-resources.xml</code> file, see the
<a href="../application-deployment-guide/toc.html#GSDPG">GlassFish Server Open Source Edition Application Deployment
Guide</a>.</p>
</div>
<div class="paragraph">
<p><a id="giywi"></a><a id="GSDVG00329"></a><a id="javabeanfactory"></a></p>
</div>
<div class="sect4">
<h5 id="_javabeanfactory">JavaBeanFactory</h5>
<div class="paragraph">
<p>To create a custom resource that provides instances of a JavaBean class,
follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the custom resource&#8217;s factory class to
<code>org.glassfish.resources.custom.factory.JavaBeanFactory</code>.</p>
</li>
<li>
<p>Create a property in the custom resource for each setter method in
the JavaBean class.<br>
For example, if the JavaBean class has a method named <code>setAccount</code>,
specify a property named <code>account</code> and give it a value.</p>
</li>
<li>
<p>Make sure the JavaBean class is accessible to the GlassFish Server.<br>
For example, you can place the JavaBean class in the as-install`/lib`
directory.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="giysn"></a><a id="GSDVG00330"></a><a id="propertiesfactory"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_propertiesfactory">PropertiesFactory</h5>
<div class="paragraph">
<p>To create a custom resource that provides properties to applications,
set the custom resource&#8217;s factory class to
<code>org.glassfish.resources.custom.factory.PropertiesFactory</code>, then specify
one or both of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a property in the custom resource named
<code>org.glassfish.resources.custom.factory.PropertiesFactory.fileName</code> and
specify as its value the path to a properties file or an XML file.<br>
The path can be absolute or relative to as-install. The file must be
accessible to the GlassFish Server.<br>
If an XML file is specified, it must match the document type definition
(DTD) specified in the API definition of
<a href="http://download.oracle.com/javase/8/docs/api/java/util/Properties.html">java.util.Properties</a>
(<code>http://docs.oracle.com/javase/8/docs/api/java/util/Properties.html</code>).</p>
</li>
<li>
<p>Create the desired properties directly as properties of the custom
resource.<br>
If both the <code>fileName</code> property and other properties are specified, the
resulting property set is the union. If the same property is defined in
the file and directly in the custom resource, the value of the latter
takes precedence.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="giytz"></a><a id="GSDVG00331"></a><a id="primitivesandstringfactory"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_primitivesandstringfactory">PrimitivesAndStringFactory</h5>
<div class="paragraph">
<p>To create a custom resource that provides Java primitives to
applications, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the custom resource&#8217;s factory class to
<code>org.glassfish.resources.custom.factory.PrimitivesAndStringFactory</code>.</p>
</li>
<li>
<p>Set the custom resource&#8217;s resource type to one of the following or
its fully qualified wrapper class name equivalent:</p>
<div class="ulist">
<ul>
<li>
<p><code>int</code></p>
</li>
<li>
<p><code>long</code></p>
</li>
<li>
<p><code>double</code></p>
</li>
<li>
<p><code>float</code></p>
</li>
<li>
<p><code>char</code></p>
</li>
<li>
<p><code>short</code></p>
</li>
<li>
<p><code>byte</code></p>
</li>
<li>
<p><code>boolean</code></p>
</li>
<li>
<p><code>String</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Create a property in the custom resource named <code>value</code> and give it
the value needed by the application.<br>
For example, If the application requires a <code>double</code> of value <code>22.1</code>,
create a property with the name <code>value</code> and the value <code>22.1</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="giywh"></a><a id="GSDVG00332"></a><a id="urlfactory"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_urlfactory">URLFactory</h5>
<div class="paragraph">
<p>To create a custom resource that provides URL instances to applications,
follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the custom resource&#8217;s factory class to
<code>org.glassfish.resources.custom.factory.URLObjectFactory</code>.</p>
</li>
<li>
<p>Choose which of the following constructors to use:</p>
<div class="ulist">
<ul>
<li>
<p><code>URL(protocol, host, port, file)</code></p>
</li>
<li>
<p><code>URL(protocol, host, file)</code></p>
</li>
<li>
<p><code>URL(spec)</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Define properties according to the chosen constructor.<br>
For example, for the first constructor, define properties named
<code>protocol</code>, <code>host</code>, <code>port</code>, and <code>file</code>. Example values might be <code>http</code>,
<code>localhost</code>, <code>8085</code>, and <code>index.html</code>, respectively.<br>
For the third constructor, define a property named <code>spec</code> and assign it
the value of the entire URL.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="gkpdn"></a><a id="GSDVG00527"></a><a id="using-application-scoped-resources"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_application_scoped_resources">Using Application-Scoped Resources</h4>
<div class="paragraph">
<p>You can define an application-scoped JNDI or other resource for an
enterprise application, web module, EJB module, connector module, or
application client module by supplying a <code>glassfish-resources.xml</code>
deployment descriptor file. For details, see
"<a href="../application-deployment-guide/deploying-applications.html#GSDPG00075">Application-Scoped Resources</a>" in GlassFish Server
Open Source Edition Application Deployment Guide.</p>
</div>
<div class="paragraph">
<p><a id="gcpge"></a><a id="GSDVG00194"></a><a id="using-a-custom-jndi.properties-file"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_a_custom_code_jndi_properties_code_file">Using a Custom <code>jndi.properties</code> File</h3>
<div class="paragraph">
<p>To use a custom <code>jndi.properties</code> file, JAR it and place it in the
domain-dir`/lib` directory. This adds the custom <code>jndi.properties</code> file
to the Common class loader. For more information about class loading,
see <a href="class-loaders.html#beade">Class Loaders</a>.</p>
</div>
<div class="paragraph">
<p>For each property found in more than one <code>jndi.properties</code> file, the
Java EE naming service either uses the first value found or concatenates
all of the values, whichever makes sense.</p>
</div>
<div class="paragraph">
<p><a id="beaoa"></a><a id="GSDVG00195"></a><a id="mapping-references"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_mapping_references">Mapping References</h3>
<div class="paragraph">
<p>The following XML elements in the GlassFish Server deployment
descriptors map resource references in application client, EJB, and web
application components to JNDI names configured in GlassFish Server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>resource-env-ref</code> - Maps the <code>@Resource</code> or <code>@Resources</code> annotation
(or the <code>resource-env-ref</code> element in the corresponding Java EE XML
file) to the absolute JNDI name configured in GlassFish Server.</p>
</li>
<li>
<p><code>resource-ref</code> - Maps the <code>@Resource</code> or <code>@Resources</code> annotation (or
the <code>resource-ref</code> element in the corresponding Java EE XML file) to the
absolute JNDI name configured in GlassFish Server.</p>
</li>
<li>
<p><code>ejb-ref</code> - Maps the <code>@EJB</code> annotation (or the <code>ejb-ref</code> element in
the corresponding Java EE XML file) to the absolute JNDI name configured
in GlassFish Server.<br>
JNDI names for EJB components must be unique. For example, appending the
application name and the module name to the EJB name is one way to
guarantee unique names. In this case, <code>mycompany.pkging.pkgingEJB.MyEJB</code>
would be the JNDI name for an EJB in the module <code>pkgingEJB.jar</code>, which
is packaged in the <code>pkging.ear</code> application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These elements are part of the <code>glassfish-web.xml</code>,
<code>glassfish-application-client.xml</code>, <code>glassfish-ejb-jar.xml</code>, and
<code>glassfish-application.xml</code> deployment descriptor files. For more
information about how these elements behave in each of the deployment
descriptor files, see "<a href="../application-deployment-guide/dd-elements.html#GSDPG00007">Elements of the GlassFish Server
Deployment Descriptors</a>" in GlassFish Server Open Source Edition
Application Deployment Guide.</p>
</div>
<div class="paragraph">
<p>The rest of this section uses an example of a JDBC resource lookup to
describe how to reference resource factories. The same principle is
applicable to all resources (such as JMS destinations, JavaMail
sessions, and so on).</p>
</div>
<div class="paragraph">
<p>The <code>@Resource</code> annotation in the application code looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">@Resource(name="jdbc/helloDbDs") javax.sql.DataSource ds;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This references a resource with the JNDI name of <code>java:jdbc/helloDbDs</code>.
If this is the JNDI name of the JDBC resource configured in the
GlassFish Server, the annotation alone is enough to reference the
resource.</p>
</div>
<div class="paragraph">
<p>However, you can use a GlassFish Server specific deployment descriptor
to override the annotation. For example, the <code>resource-ref</code> element in
the <code>glassfish-web.xml</code> file maps the <code>res-ref-name</code> (the name specified
in the annotation) to the JNDI name of another JDBC resource configured
in GlassFish Server.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;resource-ref&gt;
   &lt;res-ref-name&gt;jdbc/helloDbDs&lt;/res-ref-name&gt;
   &lt;jndi-name&gt;jdbc/helloDbDataSource&lt;/jndi-name&gt;
&lt;/resource-ref&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>

<hr />

<table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
	<colgroup>
		<col width="12%"/>
		<col width="12%"/>
		<col width="*"/>
	</colgroup>
	<tr>		
		<td align="left">
		<a href="transaction-service.html">
			<span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Previous</span>
		</a>
		</td>

		<td align="left">
		<a href="jms.html">
			<span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Next</span>
		</a>
		</td>

		<td align="right">
		<a href="toc.html">
			<span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Contents</span>
		</a>
		</td>
	</tr>
</table>

<span id="copyright">
        <img src="img/eclipse_foundation_logo_tiny.png" height="20px" alt="Eclipse Foundation Logo" align="top"/>&nbsp;            
        <span >Copyright&nbsp;&copy;&nbsp;2019,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.</span>
</span>

<p align="center" class="beta">DRAFT</p>

</body>
</html>