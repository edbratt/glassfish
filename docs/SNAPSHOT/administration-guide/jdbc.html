
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Administering Database Connectivity</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
<table id="doc-title" cellspacing="0" cellpadding="0">
  <tr>
  <td align="left" valign="top">
  <b>Administering Database Connectivity</b><br />
      <p class="beta">DRAFT</p>
  </td>
  </tr>
</table>
<hr />

<table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
	<colgroup>
		<col width="12%"/>
		<col width="12%"/>
		<col width="*"/>
	</colgroup>
	<tr>
		<td align="left">
		<a href="part-res-and-svcs-admin.html">
			<span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Previous</span>
		</a>
		</td>

		<td align="left">
		<a href="connectors.html">
			<span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Next</span>
		</a>
		</td>

		<td align="right">
		<a href="toc.html">
			<span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Contents</span>
		</a>
		</td>
	</tr>
</table>


<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a id="GSADG00015"></a><a id="ablih"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="administering-database-connectivity">11 Administering Database Connectivity</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter provides procedures for performing database connectivity
tasks in the GlassFish Server Open Source Edition 5.0 environment by
using the <code>asadmin</code> command-line utility.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gipbp">About Database Connectivity</a></p>
</li>
<li>
<p><a href="#ggkon">Setting Up the Database</a></p>
</li>
<li>
<p><a href="#ggndx">Configuring Access to the Database</a></p>
</li>
<li>
<p><a href="#beamw">Configuration Specifics for JDBC Drivers</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Instructions for accomplishing these tasks by using the Administration
Console are contained in the Administration Console online help.</p>
</div>
<div class="paragraph">
<p><a id="gipbp"></a><a id="GSADG00576"></a><a id="about-database-connectivity"></a></p>
</div>
<div class="sect2">
<h3 id="_about_database_connectivity">About Database Connectivity</h3>
<div class="paragraph">
<p>A database management system (DBMS) provides facilities for storing,
organizing, and retrieving data. The information in databases is often
described as persistent data because it is saved on disk and exists
after the application process ends. Most business applications store
data in relational databases. Applications can access database
information by using the Java Database Connectivity (JDBC) API.</p>
</div>
<div class="paragraph">
<p>The key elements of database connectivity are the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Database. The repository where data is stored for an enterprise. Java
EE applications access relational databases through the JDBC API. For
administration procedures, see <a href="#ggkon">Setting Up the Database</a>.</p>
</li>
<li>
<p>JDBC Connection Pool. A JDBC connection pool is a group of reusable
connections for a particular database. For administration procedures,
see <a href="#gharo">Administering JDBC Connection Pools</a>.</p>
</li>
<li>
<p>JDBC Resource. A JDBC resource (data source) provides applications
with a means of connecting to a database. To create a JDBC resource,
specify the connection pool with which it is associated. Multiple JDBC
resources can specify a single connection pool. A JDBC resource is
identified by its Java Naming and Directory Interface (JNDI) name. For
administration procedures, see <a href="#ggndp">Administering JDBC
Resources</a>.</p>
</li>
<li>
<p>JDBC Driver. A database driver is a software component that enables a
Java application to interact with a database connectivity API . Each
database requires its own driver. For administration procedures, see
<a href="#ghatb">Integrating the JDBC Driver</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At runtime, the following sequence occurs when an application connects
to a database:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The application gets the JDBC resource associated with the database
by making a call through the JNDI API.<br>
Using the JNDI name of the resource, the naming and directory service
locates the JDBC resource. Each JDBC resource specifies a connection
pool.</p>
</li>
<li>
<p>Using the JDBC resource, the application gets a database connection.<br>
GlassFish Server retrieves a physical connection from the connection
pool that corresponds to the database. The pool defines connection
attributes such as the database name (URL), user name, and password.</p>
</li>
<li>
<p>After the database connection is established, the application can
read, modify, and add data to the database.<br>
The application accesses the database by making calls to the JDBC API.
The JDBC driver translates the application&#8217;s JDBC calls into the
protocol of the database server.</p>
</li>
<li>
<p>When the application is finished accessing the database, the
application closes the connection and returns the connection to the
connection pool.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="ggkon"></a><a id="GSADG00577"></a><a id="setting-up-the-database"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_the_database">Setting Up the Database</h3>
<div class="paragraph">
<p>Most applications use relational databases to store, organize, and
retrieve data. Applications access relational databases through the Java
Database Connectivity (JDBC) API.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gharl">To Install the Database and Database Driver</a></p>
</li>
<li>
<p><a href="#ggndz">To Start the Database</a></p>
</li>
<li>
<p><a href="#ggnbw">To Stop the Database</a></p>
</li>
<li>
<p><a href="#ghmbq">Apache Derby Database Utility Scripts</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gharl"></a><a id="GSADG00416"></a><a id="to-install-the-database-and-database-driver"></a></p>
</div>
<div class="sect3">
<h4 id="_to_install_the_database_and_database_driver">To Install the Database and Database Driver</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install a supported database product.<br>
To see the current list of database products supported by GlassFish
Server, refer to the <a href="../release-notes/toc.html#GSRLN">GlassFish Server Open Source Edition
Release Notes</a>.</p>
</li>
<li>
<p>Install a supported JDBC driver for the database product.<br>
For a list of drivers supported by GlassFish Server, see
<a href="#beamw">Configuration Specifics for JDBC Drivers</a>.</p>
</li>
<li>
<p>Make the JDBC driver JAR file accessible to the domain
administration server (DAS).<br>
See <a href="#ghatb">Integrating the JDBC Driver</a>.</p>
</li>
<li>
<p>Create the database.<br>
The application provider usually delivers scripts for creating and
populating the database.</p>
</li>
</ol>
</div>
<div id="GSADG949" class="paragraph">
<p>Next Steps</p>
</div>
<div class="paragraph">
<p>You are now ready to create a connection pool for the database, and a
JDBC resource that points to the connection pool. See <a href="#ggnfv">To
Create a JDBC Connection Pool</a> and <a href="#ggnda">To Create a JDBC
Resource</a>. The final step is to integrate the JDBC driver into an
administrative domain as described in <a href="#ghatb">Integrating the JDBC
Driver</a>.</p>
</div>
<div class="paragraph">
<p><a id="ggndz"></a><a id="GSADG00417"></a><a id="to-start-the-database"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_start_the_database">To Start the Database</h4>
<div class="paragraph">
<p>GlassFish Server includes an implementation of the Apache Derby
database, however, you can use any JDBC-compliant database. The database
is not started automatically when you start GlassFish Server, so if you
have applications that require a database, you need to start Apache
Derby database manually by using the local <code>start-database</code> subcommand.</p>
</div>
<div class="paragraph">
<p>Start the database by using the <a href="../reference-manual/start-database.html#GSRFM00234"><code>start-database</code></a>
subcommand.</p>
</div>
<div class="paragraph">
<p>When the database server starts, or a client connects to it
successfully, the following files are created at the location that is
specified by the <code>--dbhome</code> option:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>derby.log</code> file contains the database server process log along
with its standard output and standard error information.</p>
</li>
<li>
<p>The database files contain your schema (for example, database tables).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GSADG00212"></a><a id="ggooc"></a></p>
</div>
<div class="paragraph">
<p>Example 11-1 Starting a Database</p>
</div>
<div class="paragraph">
<p>This example starts the Apache Derby database on the host host1 and port
5001.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; start-database --dbhost host1 --dbport 5001 --terse=true
Starting database in the background.
Log redirected to /opt/SUNWappserver/databases/javadb.log.
Command start-database executed successfully.</code></pre>
</div>
</div>
<div id="GSADG950" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p>You can also view the full syntax and options of the subcommand by
typing <code>asadmin help start-database</code> at the command line.</p>
</div>
<div class="paragraph">
<p><a id="ggnbw"></a><a id="GSADG00418"></a><a id="to-stop-the-database"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_to_stop_the_database">To Stop the Database</h4>
<div class="paragraph">
<p>Use the local <code>stop-database</code> subcommand to stop the Apache Derby
database on a specified port. A single host can have multiple database
server processes running on different ports.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If necessary, notify users that the database is being stopped.</p>
</li>
<li>
<p>Stop the database by using the <a href="../reference-manual/stop-database.html#GSRFM00239"><code>stop-database</code></a>
subcommand.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GSADG00213"></a><a id="ggorc"></a></p>
</div>
<div class="paragraph">
<p>Example 11-2 Stopping a Database</p>
</div>
<div class="paragraph">
<p>This example stops the Apache Derby database on port 5001 of
<code>localhost</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; stop-database --dbhost=localhost --dbport=5001
onnection obtained for host: localhost, port number 5001.
Apache Derby Network Server - 10.2.2.1 - (538595) shutdown
at 2008-10-17 23:34:2 7.218 GMT
Command stop-database executed successfully.</code></pre>
</div>
</div>
<div id="GSADG951" class="paragraph">
<p>Troubleshooting</p>
</div>
<div class="paragraph">
<p>For a laptop that roams between networks, you might have trouble
shutting down the database. If you start the Apache Derby database and
then change your IP address, you will not be able to stop the Apache
Derby database unless you add a specific <code>--dbhost</code> argument. For
example, if you run <code>asadmin start-database</code> <code>dbhost</code> <code>= 0.0.0.0</code>, and
then disconnect Ethernet and switch to wifi, you should run a command
similar to the following to stop the database:</p>
</div>
<div class="paragraph">
<p><code>asadmin stop-database</code> <code>dbhost</code> <code>localhost</code></p>
</div>
<div id="GSADG952" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p>You can also view the full syntax and options of the subcommand by
typing <code>asadmin help stop-database</code> at the command line.</p>
</div>
<div class="paragraph">
<p><a id="ghmbq"></a><a id="GSADG00744"></a><a id="apache-derby-database-utility-scripts"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_apache_derby_database_utility_scripts">Apache Derby Database Utility Scripts</h4>
<div class="paragraph">
<p>The Apache Derby database configuration that is available for use with
GlassFish Server includes scripts that can help you use the Apache Derby
database. The following scripts are available in the
as-install`/javadb/bin` directory:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>startNetworkServer,startNetworkServer.bat</code></dt>
<dd>
<p>Script to start the network server</p>
</dd>
<dt class="hdlist1"><code>stopNetworkServer,stopNetworkServer.bat</code></dt>
<dd>
<p>Script to stop the network server</p>
</dd>
<dt class="hdlist1"><code>ij,ij.bat</code></dt>
<dd>
<p>Interactive JDBC scripting tool</p>
</dd>
<dt class="hdlist1"><code>dblook,dblook.bat</code></dt>
<dd>
<p>Script to view all or part of the DDL for a database</p>
</dd>
<dt class="hdlist1"><code>sysinfo, sysinfo.bat</code></dt>
<dd>
<p>Script to display versioning information about the Apache Derby
database environment</p>
</dd>
<dt class="hdlist1"><code>NetworkServerControl,NetworkServerControl.bat</code></dt>
<dd>
<p>Script to execute commands on the <code>NetworkServerControl</code> API</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><a id="ghmbj"></a><a id="GSADG00419"></a><a id="to-configure-your-environment-to-run-the-apache-derby-database-utility-scripts"></a></p>
</div>
<div class="sect4">
<h5 id="_to_configure_your_environment_to_run_the_apache_derby_database_utility_scripts">To Configure Your Environment to Run the Apache Derby Database Utility Scripts</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the <code>JAVA_HOME</code> environment variable specifies the
directory where the JDK is installed.</p>
</li>
<li>
<p>Set the <code>JAVADB_HOME</code> environment variable to point to the
as-install`/javadb` directory.</p>
</li>
</ol>
</div>
<div id="GSADG953" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p>For more information about these utilities, see the following
documentation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://db.apache.org/derby/docs/10.13/tools/">Apache Derby Tools and
Utilities Guide</a></p>
</li>
<li>
<p><a href="http://db.apache.org/derby/docs/10.13/adminguide/">Derby Server and
Administration Guide</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="ggndx"></a><a id="GSADG00578"></a><a id="configuring-access-to-the-database"></a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_access_to_the_database">Configuring Access to the Database</h3>
<div class="paragraph">
<p>After establishing the database, you are ready to set up access for
GlassFish Server applications. The high-level steps include creating a
JDBC connection pool, creating a JDBC resource for the connection pool,
and integrating a JDBC driver into an administrative domain.</p>
</div>
<div class="paragraph">
<p>Instructions for performing these steps are contained in the following
sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gharo">Administering JDBC Connection Pools</a></p>
</li>
<li>
<p><a href="#ggndp">Administering JDBC Resources</a></p>
</li>
<li>
<p><a href="#gkudf">Enabling the <code>jdbc/__default</code> Resource in a Clustered
Environment</a></p>
</li>
<li>
<p><a href="#ghatb">Integrating the JDBC Driver</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gharo"></a><a id="GSADG00745"></a><a id="administering-jdbc-connection-pools"></a></p>
</div>
<div class="sect3">
<h4 id="_administering_jdbc_connection_pools">Administering JDBC Connection Pools</h4>
<div class="paragraph">
<p>A JDBC connection pool is a group of reusable connections for a
particular database. Because creating each new physical connection is
time consuming, GlassFish Server maintains a pool of available
connections. When an application requests a connection, it obtains one
from the pool. When an application closes a connection, the connection
is returned to the pool. JDBC connection pools can be globally
accessible or be scoped to an enterprise application, web module, EJB
module, connector module or application client module, as described in
"<a href="../application-deployment-guide/deploying-applications.html#GSDPG00075">Application-Scoped Resources</a>" in GlassFish Server
Open Source Edition Application Deployment Guide.</p>
</div>
<div class="paragraph">
<p>A JDBC resource is created by specifying the connection pool with which
the resource is associated. Multiple JDBC resources can specify a single
connection pool. The properties of connection pools can vary with
different database vendors. Some common properties are the database name
(URL), the user name, and the password.</p>
</div>
<div class="paragraph">
<p>The following tasks and information are used to administer JDBC
connection pools:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#ggnfv">To Create a JDBC Connection Pool</a></p>
</li>
<li>
<p><a href="#ggnby">To List JDBC Connection Pools</a></p>
</li>
<li>
<p><a href="#ggnwn">To Contact (Ping) a Connection Pool</a></p>
</li>
<li>
<p><a href="#gjiqp">To Reset (Flush) a Connection Pool</a></p>
</li>
<li>
<p><a href="#giosk">To Update a JDBC Connection Pool</a></p>
</li>
<li>
<p><a href="#ggngb">To Delete a JDBC Connection Pool</a></p>
</li>
<li>
<p><a href="#gktdi">Configuring Specific JDBC Connection Pool Features</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="ggnfv"></a><a id="GSADG00420"></a><a id="to-create-a-jdbc-connection-pool"></a></p>
</div>
<div class="sect4">
<h5 id="_to_create_a_jdbc_connection_pool">To Create a JDBC Connection Pool</h5>
<div class="paragraph">
<p>Use the <code>create-jdbc-connection-pool</code> subcommand in remote mode to
register a new JDBC connection pool with the specified JDBC connection
pool name. A JDBC connection pool or a connector connection pool can be
created with authentication. You can either use a subcommand option to
specify user, password, or other connection information using the
<code>asadmin</code> utility, or specify the connection information in the XML
descriptor file.</p>
</div>
<div class="paragraph">
<p>One connection pool is needed for each database, possibly more depending
on the application. When you are building the connection pool, certain
data specific to the JDBC driver and the database vendor is required.
You can find some of the following specifics in
<a href="#beamw">Configuration Specifics for JDBC Drivers</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Database vendor name</p>
</li>
<li>
<p>Resource type, such as <code>javax.sql.DataSource</code> (local transactions
only) <code>javax.sql.XADataSource</code> (global transactions)</p>
</li>
<li>
<p>Data source class name</p>
</li>
<li>
<p>Required properties, such as the database name (URL), user name, and
password</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Creating a JDBC connection pool is a dynamic event and does not require
server restart. However, there are some parameters that do require
server restart. See <a href="overview.html#ghciy">Configuration Changes That
Require Restart</a>.</p>
</div>
<div id="GSADG954" class="paragraph">
<p>Before You Begin</p>
</div>
<div class="paragraph">
<p>Before creating the connection pool, you must first install and
integrate the database and its associated JDBC driver. For instructions,
see <a href="#ggkon">Setting Up the Database</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the server is running.<br>
Remote subcommands require a running server.</p>
</li>
<li>
<p>Create the JDBC connection pool by using the
<a href="../reference-manual/create-jdbc-connection-pool.html#GSRFM00036"><code>create-jdbc-connection-pool</code></a> subcommand.</p>
</li>
<li>
<p>If needed, restart the server.<br>
Some parameters require server restart. See
<a href="overview.html#ghciy">Configuration Changes That Require Restart</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GSADG00214"></a><a id="ggrgh"></a></p>
</div>
<div class="paragraph">
<p>Example 11-3 Creating a JDBC Connection Pool</p>
</div>
<div class="paragraph">
<p>This example creates a JDBC connection pool named <code>sample_derby_pool</code> on
<code>localhost</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; create-jdbc-connection-pool
--datasourceclassname org.apache.derby.jdbc.ClientDataSource
--restype javax.sql.XADataSource
--property portNumber=1527:password=APP:user=APP:serverName=
localhost:databaseName=sun-appserv-samples:connectionAttribut
es=\;create\\=true sample_derby_pool
Command create-jdbc-connection-pool executed successfully.</code></pre>
</div>
</div>
<div id="GSADG955" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p>You can also view the full syntax and options of the subcommand by
typing <code>asadmin help create-jdbc-connection-pool</code> at the command line.</p>
</div>
<div class="paragraph">
<p><a id="ggnby"></a><a id="GSADG00421"></a><a id="to-list-jdbc-connection-pools"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_list_jdbc_connection_pools">To List JDBC Connection Pools</h5>
<div class="paragraph">
<p>Use the <code>list-jdbc-connection-pools</code> subcommand in remote mode to list
all existing JDBC connection pools.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the server is running.<br>
Remote subcommands require a running server.</p>
</li>
<li>
<p>List the JDBC connection pools by using the
<a href="../reference-manual/list-jdbc-connection-pools.html#GSRFM00173"><code>list-jdbc-connection-pools</code></a> subcommand.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GSADG00215"></a><a id="ggpcf"></a></p>
</div>
<div class="paragraph">
<p>Example 11-4 Listing JDBC Connection Pools</p>
</div>
<div class="paragraph">
<p>This example lists the JDBC connection pools that are on <code>localhost</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; list-jdbc-connection-pools
sample_derby_pool2
poolA
__TimerPool
DerbyPool
sample_derby_pool
Command list-jdbc-connection-pools executed successfully.</code></pre>
</div>
</div>
<div id="GSADG956" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p>You can also view the full syntax and options of the subcommand by
typing <code>asadmin help list-jdbc-connection-pools</code> at the command line.</p>
</div>
<div class="paragraph">
<p><a id="ggnwn"></a><a id="GSADG00422"></a><a id="to-contact-ping-a-connection-pool"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_contact_ping_a_connection_pool">To Contact (Ping) a Connection Pool</h5>
<div class="paragraph">
<p>Use the <code>ping-connection-pool</code> subcommand in remote mode to test if a
connection pool is usable. For example, if you create a new JDBC
connection pool for an application that is expected to be deployed
later, you can test the JDBC pool with this subcommand before the
application is deployed. Running a ping will force the creation of the
pool if it hasn&#8217;t already been created.</p>
</div>
<div id="GSADG957" class="paragraph">
<p>Before You Begin</p>
</div>
<div class="paragraph">
<p>Before you can contact a connection pool, the connection pool must be
created with authentication, and the server or database must be running.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the server is running.<br>
Remote subcommands require a running server.</p>
</li>
<li>
<p>Ping a connection pool by using the
<a href="../reference-manual/ping-connection-pool.html#GSRFM00214"><code>ping-connection-pool</code></a> subcommand.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GSADG00216"></a><a id="ggpcs"></a></p>
</div>
<div class="paragraph">
<p>Example 11-5 Contacting a Connection Pool</p>
</div>
<div class="paragraph">
<p>This example tests to see if the <code>DerbyPool</code> connection pool is usable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; ping-connection-pool DerbyPool
Command ping-connection-pool executed successfully</code></pre>
</div>
</div>
<div id="GSADG958" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p>You can also view the full syntax and options of the subcommand by
typing <code>asadmin help ping-connection-pool</code> at the command line.</p>
</div>
<div class="paragraph">
<p>You can also specify that a JDBC connection pool is automatically tested
when created or reconfigured by setting its <code>--ping</code> option to <code>true</code>
(the default is <code>false</code>). See <a href="#ggnfv">To Create a JDBC Connection
Pool</a> or <a href="#giosk">To Update a JDBC Connection Pool</a>.</p>
</div>
<div class="paragraph">
<p><a id="gjiqp"></a><a id="GSADG00423"></a><a id="to-reset-flush-a-connection-pool"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_reset_flush_a_connection_pool">To Reset (Flush) a Connection Pool</h5>
<div class="paragraph">
<p>Use the <code>flush-connection-pool</code> in remote mode to reinitialize all
connections established in the specified connection pool without the
need for reconfiguring the pool. Connection pool reconfiguration can
result in application redeployment, which is a time-consuming operation.
The JDBC connection pool or connector connection pool is reset to its
initial state. Any existing live connections are destroyed, which means
that the transactions associated with these connections are lost and
must be retried. The subcommand then recreates the initial connections
for the pool, and restores the pool to its steady pool size.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the server is running.<br>
Remote subcommands require a running server.</p>
</li>
<li>
<p>Reset a connection pool by using
theo<a href="GSRFM00135"><code>flush-connection-pool</code></a> subcommand.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GSADG00217"></a><a id="gjirk"></a></p>
</div>
<div class="paragraph">
<p>Example 11-6 Resetting (Flushing) a Connection Pool</p>
</div>
<div class="paragraph">
<p>This example resets the JDBC connection pool named <code>__TimerPool</code> to its
steady pool size.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; flush-connection-pool __TimerPool
Command flush-connection-pool executed successfully.</code></pre>
</div>
</div>
<div id="GSADG959" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p>You can also view the full syntax and options of the subcommand by
typing <code>asadmin help flush-connection-pool</code> at the command line.</p>
</div>
<div class="paragraph">
<p><a id="giosk"></a><a id="GSADG00424"></a><a id="to-update-a-jdbc-connection-pool"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_update_a_jdbc_connection_pool">To Update a JDBC Connection Pool</h5>
<div class="paragraph">
<p>You can change all of the settings for an existing pool except its name.
Use the <code>get</code> and <code>set</code> subcommands to view and change the values of the
JDBC connection pool properties.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>List the JDBC connection pools by using the
<a href="../reference-manual/list-jdbc-connection-pools.html#GSRFM00173"><code>list-jdbc-connection-pools</code></a> subcommand.</p>
</li>
<li>
<p>View the attributes of the JDBC connection pool by using the get
subcommand.<br>
For example:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin get resources.jdbc-connection-pool.DerbyPool.property</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the attribute of the JDBC connection pool by using the set
subcommand.<br>
For example:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin set resources.jdbc-connection-pool.DerbyPool.steady-pool-size=9</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If needed, restart the server.<br>
Some parameters require server restart. See
<a href="overview.html#ghciy">Configuration Changes That Require Restart</a>.</p>
</li>
</ol>
</div>
<div id="GSADG960" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p>For information about how to tune a connection pool, see the
<a href="../performance-tuning-guide/toc.html#GSPTG">GlassFish Server Open Source Edition Performance Tuning
Guide</a>.</p>
</div>
<div class="paragraph">
<p><a id="ggngb"></a><a id="GSADG00425"></a><a id="to-delete-a-jdbc-connection-pool"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_delete_a_jdbc_connection_pool">To Delete a JDBC Connection Pool</h5>
<div class="paragraph">
<p>Use the <code>delete-jdbc-connection-pool</code> subcommand in remote mode to
delete an existing JDBC connection pool. Deleting a JDBC connection pool
is a dynamic event and does not require server restart.</p>
</div>
<div id="GSADG961" class="paragraph">
<p>Before You Begin</p>
</div>
<div class="paragraph">
<p>Before deleting a JDBC connection pool, all associations to the resource
must be removed.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the server is running.<br>
Remote subcommands require a running server.</p>
</li>
<li>
<p>List the JDBC connection pools by using the
<a href="../reference-manual/list-jdbc-connection-pools.html#GSRFM00173"><code>list-jdbc-connection-pools</code></a> subcommand.</p>
</li>
<li>
<p>If necessary, notify users that the JDBC connection pool is being
deleted.</p>
</li>
<li>
<p>Delete the connection pool by using the
<a href="../reference-manual/delete-jdbc-connection-pool.html#GSRFM00088"><code>delete-jdbc-connection-pool</code></a> subcommand.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GSADG00218"></a><a id="ggpis"></a></p>
</div>
<div class="paragraph">
<p>Example 11-7 Deleting a JDBC Connection Pool</p>
</div>
<div class="paragraph">
<p>This example deletes the JDBC connection pool named <code>DerbyPool</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; delete-jdbc-connection-pool jdbc/DerbyPool
Command delete-jdbc-connection-pool executed successfully.</code></pre>
</div>
</div>
<div id="GSADG962" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p>You can also view the full syntax and options of the subcommand by
typing <code>asadmin help delete-jdbc-connection-pool</code> at the command line.</p>
</div>
<div class="paragraph">
<p><a id="gktdi"></a><a id="GSADG00670"></a><a id="configuring-specific-jdbc-connection-pool-features"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_configuring_specific_jdbc_connection_pool_features">Configuring Specific JDBC Connection Pool Features</h5>
<div class="paragraph">
<p>In GlassFish Server, JDBC Connection Pools support a variety of features
to simplify administration, monitoring and performance tuning. The
following topics address several of these features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gktcv">Transparent Pool Reconfiguration</a></p>
</li>
<li>
<p><a href="#gkter">Using an Initialization Statement</a></p>
</li>
<li>
<p><a href="#gktcc">Setting a Statement Timeout</a></p>
</li>
<li>
<p><a href="#gktec">Statement Leak Detection and Leaked Statement Reclamation</a></p>
</li>
<li>
<p><a href="#gktej">Statement Caching</a></p>
</li>
<li>
<p><a href="#gktbu">Statement Tracing</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gktcv"></a><a id="GSADG00085"></a><a id="transparent-pool-reconfiguration"></a></p>
</div>
<div class="paragraph">
<p>Transparent Pool Reconfiguration</p>
</div>
<div class="paragraph">
<p>When the properties or attributes of a JDBC connection pool are changed,
the connection pool is destroyed and re-created. Normally, applications
using the connection pool must be redeployed as a consequence. This
restriction can be avoided by enabling transparent JDBC connection pool
reconfiguration. When this feature is enabled, applications do not need
to be redeployed. Instead, requests for new connections are blocked
until the reconfiguration operation completes. Connection requests from
any in-flight transactions are served using the old pool configuration
so as to complete the transaction. Then, connections are created using
the pool&#8217;s new configuration, and any blocked connection requests are
served with connections from the re-created pool.</p>
</div>
<div class="paragraph">
<p>To enable transparent JDBC connection pool reconfiguration, set the
<code>dynamic-reconfiguration-wait-timeout-in-seconds</code> property of the JDBC
connection pool to a positive, nonzero value in one of the following
ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add it as a property in the Edit JDBC Connection Pool Properties page
in the Administration Console. For more information, click the Help
button in the Administration Console.</p>
</li>
<li>
<p>Specify it using the <code>--property</code> option in the
<code>create-jdbc-connection-pool</code> subcommand. For more information, see
<a href="../reference-manual/create-jdbc-connection-pool.html#GSRFM00036"><code>create-jdbc-connection-pool</code>(1)</a>.</p>
</li>
<li>
<p>Set it using the <code>set</code> subcommand. For example:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin set resources.jdbc-connection-pool.pool-name.property.dynamic-reconfiguration-wait-timeout-in-seconds=15</pre>
</div>
</div>
<div class="paragraph">
<p>This property specifies the time in seconds to wait for in-use
connections to close and in-flight transactions to complete. Any
connections in use or transaction in flight past this time must be
retried.</p>
</div>
<div class="paragraph">
<p><a id="gkter"></a><a id="GSADG00086"></a><a id="using-an-initialization-statement"></a></p>
</div>
<div class="paragraph">
<p>Using an Initialization Statement</p>
</div>
<div class="paragraph">
<p>You can specify a statement that executes each time a physical
connection to the database is created (not reused) from a JDBC
connection pool. This is useful for setting request or session specific
properties and is suited for homogeneous requests in a single
application. Set the Init SQL attribute of the JDBC connection pool to
the SQL string to be executed in one of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enter an Init SQL value in the Edit Connection Pool Advanced
Attributes page in the Administration Console. For more information,
click the Help button in the Administration Console.</p>
</li>
<li>
<p>Specify the <code>--initsql</code> option in the
<code>asadmin create-jdbc-connection-pool</code> command. For more information, see
<a href="../reference-manual/create-jdbc-connection-pool.html#GSRFM00036"><code>create-jdbc-connection-pool</code>(1)</a>.</p>
</li>
<li>
<p>Specify the <code>init-sql</code> option in the <code>asadmin set</code> command. For
example:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin set domain1.resources.jdbc-connection-pool.DerbyPool.init-sql="sql-string"</pre>
</div>
</div>
<div class="paragraph">
<p><a id="gktcc"></a><a id="GSADG00087"></a><a id="setting-a-statement-timeout"></a></p>
</div>
<div class="paragraph">
<p>Setting a Statement Timeout</p>
</div>
<div class="paragraph">
<p>An abnormally long running JDBC query executed by an application may
leave it in a hanging state unless a timeout is explicitly set on the
statement. Setting a statement timeout guarantees that all queries
automatically time out if not completed within the specified period.
When statements are created, the <code>queryTimeout</code> is set according to the
statement timeout setting. This works only when the underlying JDBC
driver supports <code>queryTimeout</code> for <code>Statement</code>, <code>PreparedStatement</code>,
<code>CallableStatement</code>, and <code>ResultSet</code>.</p>
</div>
<div class="paragraph">
<p>You can specify a statement timeout in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enter a Statement Timeout value in the Edit Connection Pool Advanced
Attributes page in the Administration Console. For more information,
click the Help button in the Administration Console.</p>
</li>
<li>
<p>Specify the <code>--statementtimeout</code> option in the
<code>asadmin create-jdbc-connection-pool</code> command. For more information, see
<a href="../reference-manual/create-jdbc-connection-pool.html#GSRFM00036"><code>create-jdbc-connection-pool</code>(1)</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gktec"></a><a id="GSADG00088"></a><a id="statement-leak-detection-and-leaked-statement-reclamation"></a></p>
</div>
<div class="paragraph">
<p>Statement Leak Detection and Leaked Statement Reclamation</p>
</div>
<div class="paragraph">
<p>If statements are not closed by an application after use, it is possible
for the application to run out of cursors. Enabling statement leak
detection causes statements to be considered as leaked if they are not
closed within a specified period. Additionally, leaked statements can
reclaimed automatically.</p>
</div>
<div class="paragraph">
<p>To enable statement leak detection, set Statement Leak Timeout In
Seconds for the JDBC connection pool to a positive, nonzero value in one
of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Specify the <code>--statementleaktimeout</code> option in the
<code>create-jdbc-connection-pool</code> subcommand. For more information, see
<a href="../reference-manual/create-jdbc-connection-pool.html#GSRFM00036"><code>create-jdbc-connection-pool</code>(1)</a>.</p>
</li>
<li>
<p>Specify the <code>statement-leak-timeout-in-seconds</code> option in the <code>set</code>
subcommand. For example:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin set resources.jdbc-connection-pool.pool-name.statement-leak-timeout-in-seconds=300</pre>
</div>
</div>
<div class="paragraph">
<p>When selecting a value for Statement Leak Timeout In Seconds, make sure
that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is less than the Connection Leak Timeout; otherwise, the connection
could be closed before the statement leak is recognized.</p>
</li>
<li>
<p>It is greater than the Statement Timeout; otherwise, a long running
query could be mistaken as a statement leak.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After enabling statement leak detection, enable leaked statement
reclamation by setting Reclaim Leaked Statements for the JDBC connection
pool to a <code>true</code> value in one of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Specify the <code>--statementleakreclaim=true</code> option in the
<code>create-jdbc-connection-pool</code> subcommand. For more information, see
<a href="../reference-manual/create-jdbc-connection-pool.html#GSRFM00036"><code>create-jdbc-connection-pool</code>(1)</a>.</p>
</li>
<li>
<p>Specify the <code>statement-leak-reclaim</code> option in the <code>set</code> subcommand.
For example:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin set resources.jdbc-connection-pool.pool-name.statement-leak-reclaim=true</pre>
</div>
</div>
<div class="paragraph">
<p><a id="gktej"></a><a id="GSADG00089"></a><a id="statement-caching"></a></p>
</div>
<div class="paragraph">
<p>Statement Caching</p>
</div>
<div class="paragraph">
<p>Statement caching stores statements, prepared statements, and callable
statements that are executed repeatedly by applications in a cache,
thereby improving performance. Instead of the statement being prepared
each time, the cache is searched for a match. The overhead of parsing
and creating new statements each time is eliminated.</p>
</div>
<div class="paragraph">
<p>Statement caching is usually a feature of the JDBC driver. The GlassFish
Server provides caching for drivers that do not support caching. To
enable this feature, set the Statement Cache Size for the JDBC
connection pool in one of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enter a Statement Cache Size value in the Edit Connection Pool
Advanced Attributes page in the Administration Console. For more
information, click the Help button in the Administration Console.</p>
</li>
<li>
<p>Specify the <code>--statementcachesize</code> option in the
<code>asadmin create-jdbc-connection-pool</code> command. For more information, see
<a href="../reference-manual/create-jdbc-connection-pool.html#GSRFM00036"><code>create-jdbc-connection-pool</code>(1)</a>.</p>
</li>
<li>
<p>Specify the <code>statement-cache-size</code> option in the <code>asadmin set</code>
command. For example:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin set domain1.resources.jdbc-connection-pool.DerbyPool.statement-cache-size=10</pre>
</div>
</div>
<div class="paragraph">
<p>By default, this attribute is set to zero and the statement caching is
turned off. To enable statement caching, you can set any positive
nonzero value. The built-in cache eviction strategy is LRU-based (Least
Recently Used). When a connection pool is flushed, the connections in
the statement cache are recreated.</p>
</div>
<div class="paragraph">
<p><a id="gktbu"></a><a id="GSADG00090"></a><a id="statement-tracing"></a></p>
</div>
<div class="paragraph">
<p>Statement Tracing</p>
</div>
<div class="paragraph">
<p>You can trace the SQL statements executed by applications that use a
JDBC connection pool. Set the SQL Trace Listeners attribute to a
comma-separated list of trace listener implementation classes in one of
the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enter an SQL Trace Listeners value in the Edit Connection Pool
Advanced Attributes page in the Administration Console. For more
information, click the Help button in the Administration Console.</p>
</li>
<li>
<p>Specify the <code>--sqltracelisteners</code> option in the
<code>asadmin create-jdbc-connection-pool</code> command. For more information, see
<a href="../reference-manual/create-jdbc-connection-pool.html#GSRFM00036"><code>create-jdbc-connection-pool</code>(1)</a>.</p>
</li>
<li>
<p>Specify the <code>sql-trace-listeners</code> option in the <code>asadmin set</code> command.
For example:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin set domain1.resources.jdbc-connection-pool.DerbyPool.sql-trace-listeners=listeners</pre>
</div>
</div>
<div class="paragraph">
<p>The GlassFish Server provides a public interface,
org.glassfish.api.jdbc.SQLTraceListener , that implements a means of
recording <code>SQLTraceRecord</code> objects. To make custom implementations of
this interface available to the GlassFish Server, place the
implementation classes in as-install`/lib`.</p>
</div>
<div class="paragraph">
<p>The GlassFish Server provides an SQL tracing logger to log the SQL
operations in the form of <code>SQLTraceRecord</code> objects in the <code>server.log</code>
file. The module name under which the SQL operation is logged is
<code>jakarta.enterprise.resource.sqltrace</code>. SQL traces are logged as FINE
messages along with the module name to enable easy filtering of the SQL
logs. A sample SQL trace record looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">[#|2009-11-27T15:46:52.202+0530|FINE|glassfishv3.0|jakarta.enterprise.resource.sqltrace.com.sun.gjc.util
|_ThreadID=29;_ThreadName=Thread-1;ClassName=com.sun.gjc.util.SQLTraceLogger;MethodName=sqlTrace;
|ThreadID=77 | ThreadName=p: thread-pool-1; w: 6 | TimeStamp=1259317012202
| ClassName=com.sun.gjc.spi.jdbc40.PreparedStatementWrapper40 | MethodName=executeUpdate
| arg[0]=insert into table1(colName) values(100) | arg[1]=columnNames | |#]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This trace shows that an <code>executeUpdate(String sql, String columnNames)</code>
operation is being done.</p>
</div>
<div class="paragraph">
<p>When SQL statement tracing is enabled and JDBC connection pool
monitoring is enabled, GlassFish Server maintains a tracing cache of
recent queries and their frequency of use. The following JDBC connection
pool properties can be configured to control this cache and the
monitoring statistics available from it:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>time-to-keep-queries-in-minutes</code></dt>
<dd>
<p>Specifies how long in minutes to keep a query in the tracing cache,
tracking its frequency of use. The default value is 5 minutes.</p>
</dd>
<dt class="hdlist1"><code>number-of-top-queries-to-report</code></dt>
<dd>
<p>Specifies how many of the most used queries, in frequency order, are
listed the monitoring report. The default value is 10 queries.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Set these parameters in one of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add them as properties in the Edit JDBC Connection Pool Properties
page in the Administration Console. For more information, click the Help
button in the Administration Console.</p>
</li>
<li>
<p>Specify them using the <code>--property</code> option in the
<code>create-jdbc-connection-pool</code> subcommand. For more information, see
<a href="../reference-manual/create-jdbc-connection-pool.html#GSRFM00036"><code>create-jdbc-connection-pool</code>(1)</a>.</p>
</li>
<li>
<p>Set them using the <code>set</code> subcommand. For example:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin set resources.jdbc-connection-pool.pool-name.property.time-to-keep-queries-in-minutes=10</pre>
</div>
</div>
<div class="paragraph">
<p><a id="ggndp"></a><a id="GSADG00746"></a><a id="administering-jdbc-resources"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_administering_jdbc_resources">Administering JDBC Resources</h4>
<div class="paragraph">
<p>A JDBC resource, also known as a data source, provides an application
with a means of connecting to a database. Typically, you create a JDBC
resource for each database that is accessed by the applications deployed
in a domain. Multiple JDBC resources can be specified for a database.
JDBC resources can be globally accessible or be scoped to an enterprise
application, web module, EJB module, connector module or application
client module, as described in "<a href="../application-deployment-guide/deploying-applications.html#GSDPG00075">Application-Scoped
Resources</a>" in GlassFish Server Open Source Edition Application
Deployment Guide.</p>
</div>
<div class="paragraph">
<p>A JDBC resource is created by specifying the connection pool with which
the resource will be associated . Use a unique Java Naming and Directory
Interface (JNDI) name to identify the resource. For example, the JNDI
name for the resource of a payroll database might be
<code>java:comp/env/jdbc/payrolldb</code>.</p>
</div>
<div class="paragraph">
<p>The Java EE standard specifies that certain default resources be made
available to applications, and defines specific JNDI names for these
default resources. GlassFish Server makes these names available through
the use of logical JNDI names, which map Java EE standard JNDI names to
specific GlassFish Server resources. For JDBC resources, the Java EE
standard name <code>java:comp/DefaultDataSource</code> is mapped to the
<code>jdbc/__default</code> resource.</p>
</div>
<div class="paragraph">
<p>The following tasks and information are used to administer JDBC
resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#ggnda">To Create a JDBC Resource</a></p>
</li>
<li>
<p><a href="#ggnhl">To List JDBC Resources</a></p>
</li>
<li>
<p><a href="#giwjv">To Update a JDBC Resource</a></p>
</li>
<li>
<p><a href="#ggnhz">To Delete a JDBC Resource</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="ggnda"></a><a id="GSADG00426"></a><a id="to-create-a-jdbc-resource"></a></p>
</div>
<div class="sect4">
<h5 id="_to_create_a_jdbc_resource">To Create a JDBC Resource</h5>
<div class="paragraph">
<p>Use the <code>create-jdbc-resource</code> subcommand in remote mode to create a
JDBC resource. Creating a JDBC resource is a dynamic event and does not
require server restart.</p>
</div>
<div class="paragraph">
<p>Because all JNDI names are in the <code>java:comp/env</code> subcontext, when
specifying the JNDI name of a JDBC resource in the Administration
Console, use only the <code>jdbc/`name format. For example, a payroll
database might be specified as `jdbc/payrolldb</code>.</p>
</div>
<div id="GSADG963" class="paragraph">
<p>Before You Begin</p>
</div>
<div class="paragraph">
<p>Before creating a JDBC resource, you must first create a JDBC connection
pool. For instructions, see <a href="#ggnfv">To Create a JDBC Connection
Pool</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the server is running.<br>
Remote subcommands require a running server.</p>
</li>
<li>
<p>Create a JDBC resource by using the
<a href="../reference-manual/create-jdbc-resource.html#GSRFM00037"><code>create-jdbc-resource</code></a> subcommand.<br>
Information about properties for the subcommand is included in this help
page.</p>
</li>
<li>
<p>If necessary, notify users that the new resource has been created.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GSADG00219"></a><a id="ggplj"></a></p>
</div>
<div class="paragraph">
<p>Example 11-8 Creating a JDBC Resource</p>
</div>
<div class="paragraph">
<p>This example creates a JDBC resource named <code>DerbyPool</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; create-jdbc-resource --connectionpoolid DerbyPool jdbc/DerbyPool
Command create-jdbc-resource executed successfully.</code></pre>
</div>
</div>
<div id="GSADG964" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p>You can also view the full syntax and options of the subcommand by
typing <code>asadmin help create-jdbc-resource</code> at the command line.</p>
</div>
<div class="paragraph">
<p><a id="ggnhl"></a><a id="GSADG00427"></a><a id="to-list-jdbc-resources"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_list_jdbc_resources">To List JDBC Resources</h5>
<div class="paragraph">
<p>Use the <code>list-jdbc-resources</code> subcommand in remote mode to list the
existing JDBC resources.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the server is running.<br>
Remote subcommands require a running server.</p>
</li>
<li>
<p>List JDBC resources by using the
<a href="../reference-manual/list-jdbc-resources.html#GSRFM00174"><code>list-jdbc-resources</code></a> subcommand.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GSADG00220"></a><a id="ggpgi"></a></p>
</div>
<div class="paragraph">
<p>Example 11-9 Listing JDBC Resources</p>
</div>
<div class="paragraph">
<p>This example lists JDBC resources for <code>localhost</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; list-jdbc-resources
jdbc/__TimerPool
jdbc/DerbyPool
jdbc/__default
jdbc1
Command list-jdbc-resources executed successfully.</code></pre>
</div>
</div>
<div id="GSADG965" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p>You can also view the full syntax and options of the subcommand by
typing <code>asadmin help list-jdbc-resources</code> at the command line.</p>
</div>
<div class="paragraph">
<p><a id="giwjv"></a><a id="GSADG00428"></a><a id="to-update-a-jdbc-resource"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_update_a_jdbc_resource">To Update a JDBC Resource</h5>
<div class="paragraph">
<p>You can enable or disable a JDBC resource by using the <code>set</code> subcommand.
The JDBC resource is identified by its dotted name.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>List JDBC resources by using the
<a href="../reference-manual/list-jdbc-resources.html#GSRFM00174"><code>list-jdbc-resources</code></a> subcommand.</p>
</li>
<li>
<p>Modify the values for the specified JDBC resource by using the
<a href="../reference-manual/set.html#GSRFM00226"><code>set</code></a> subcommand.<br>
For example:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GSADG00221"></a><a id="gjkrz"></a></p>
</div>
<div class="paragraph">
<p>Example 11-10 Updating a JDBC Resource</p>
</div>
<div class="paragraph">
<p>This example changes the <code>res1</code> enabled setting to false.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt;set resources.jdbc-resource.res1.enabled=false</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="ggnhz"></a><a id="GSADG00429"></a><a id="to-delete-a-jdbc-resource"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_delete_a_jdbc_resource">To Delete a JDBC Resource</h5>
<div class="paragraph">
<p>Use the <code>delete-jdbc-resource</code> subcommand in remote mode to delete an
existing JDBC resource. Deleting a JDBC resource is a dynamic event and
does not require server restart.</p>
</div>
<div id="GSADG966" class="paragraph">
<p>Before You Begin</p>
</div>
<div class="paragraph">
<p>Before deleting a JDBC resource, all associations with this resource
must be removed.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the server is running.<br>
Remote subcommands require a running server.</p>
</li>
<li>
<p>List JDBC resources by using the
<a href="../reference-manual/list-jdbc-resources.html#GSRFM00174"><code>list-jdbc-resources</code></a> subcommand.</p>
</li>
<li>
<p>If necessary, notify users that the JDBC resource is being deleted.</p>
</li>
<li>
<p>Delete a JDBC resource by using the
<a href="../reference-manual/delete-jdbc-resource.html#GSRFM00089"><code>delete-jdbc-resource</code></a> subcommand.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GSADG00222"></a><a id="ggpga"></a></p>
</div>
<div class="paragraph">
<p>Example 11-11 Deleting a JDBC Resource</p>
</div>
<div class="paragraph">
<p>This example deletes a JDBC resource named <code>DerbyPool</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; delete-jdbc-resource jdbc/DerbyPool
Command delete-jdbc-resource executed successfully.</code></pre>
</div>
</div>
<div id="GSADG967" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p>You can also view the full syntax and options of the subcommand by
typing <code>asadmin help delete-jdbc-resource</code> at the command line.</p>
</div>
<div class="paragraph">
<p><a id="gkudf"></a><a id="GSADG00747"></a><a id="enabling-the-jdbc__default-resource-in-a-clustered-environment"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_enabling_the_code_jdbc_default_code_resource_in_a_clustered_environment">Enabling the <code>jdbc/__default</code> Resource in a Clustered Environment</h4>
<div class="paragraph">
<p>GlassFish Server 5.0 includes a preconfigured JDBC resource with the
JNDI name <code>jdbc/__default</code>. This <code>jdbc/__default</code> resource is not
enabled by default, so you need to explicitly enable it if you want to
use it in a cluster.</p>
</div>
<div class="paragraph">
<p><a id="gkubj"></a><a id="GSADG00430"></a><a id="to-enable-the-jdbc__default-resource-for-a-clustered-environment"></a></p>
</div>
<div class="sect4">
<h5 id="_to_enable_the_code_jdbc_default_code_resource_for_a_clustered_environment">To Enable the <code>jdbc/__default</code> Resource for a Clustered Environment</h5>
<div class="paragraph">
<p>Instructions for creating JDBC resources in general are provided in
<a href="#ggnda">To Create a JDBC Resource</a>. Use the following procedure to
enable the preconfigured <code>jdbc/__default</code> resource for a clustered
GlassFish Server environment.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the <code>jdbc/__default</code> resource reference for the cluster.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin create-resource-ref --target cluster-name jdbc/__default</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enable the resource on the DAS that manages the cluster.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>asadmin set resources.jdbc-connection-pool.DerbyPool.property.serverName=DAS-machine-name</pre>
</div>
</div>
<div class="paragraph">
<p>This step is only required if the cluster includes remote instances.
3.  Restart the DAS and the target cluster(s).<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin stop-cluster cluster-name
asadmin stop-domain domain-name
asadmin start-domain domain-name
asadmin start-cluster cluster-name</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="ghatb"></a><a id="GSADG00748"></a><a id="integrating-the-jdbc-driver"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_integrating_the_jdbc_driver">Integrating the JDBC Driver</h4>
<div class="paragraph">
<p>To use JDBC features, you must choose a JDBC driver to work with the
GlassFish Server, then you must set up the driver. This section covers
these topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gkpdj">Supported Database Drivers</a></p>
</li>
<li>
<p><a href="#gkpci">Making the JDBC Driver JAR Files Accessible</a></p>
</li>
<li>
<p><a href="#gkpfj">Automatic Detection of Installed Drivers</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gkpdj"></a><a id="GSADG00671"></a><a id="supported-database-drivers"></a></p>
</div>
<div class="sect4">
<h5 id="_supported_database_drivers">Supported Database Drivers</h5>
<div class="paragraph">
<p>Supported JDBC drivers are those that have been fully tested by Oracle.
For a list of the JDBC drivers currently supported by the GlassFish
Server, see the <a href="../release-notes/toc.html#GSRLN">GlassFish Server Open Source Edition Release
Notes</a>. For configurations of supported and other drivers, see
<a href="#beamw">Configuration Specifics for JDBC Drivers</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Because the drivers and databases supported by the GlassFish Server are
constantly being updated, and because database vendors continue to
upgrade their products, always check with Oracle technical support for
the latest database support information.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a id="gkpci"></a><a id="GSADG00672"></a><a id="making-the-jdbc-driver-jar-files-accessible"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_making_the_jdbc_driver_jar_files_accessible">Making the JDBC Driver JAR Files Accessible</h5>
<div class="paragraph">
<p>To integrate the JDBC driver into a GlassFish Server domain, copy the
JAR files into the domain-dir`/lib` directory, then restart the server.
This makes classes accessible to all applications or modules deployed on
servers that share the same configuration. For more information about
GlassFish Server class loaders, see "<a href="../application-development-guide/class-loaders.html#GSDVG00003">Class Loaders</a>" in
GlassFish Server Open Source Edition Application Development Guide.</p>
</div>
<div class="paragraph">
<p>If you are using an Oracle database with EclipseLink extensions, copy
the JAR files into the domain-dir`/lib/ext` directory, then restart the
server. For details, see "<a href="../application-development-guide/jpa.html#GSDVG00390">Oracle Database
Enhancements</a>" in GlassFish Server Open Source Edition Application
Development Guide.</p>
</div>
<div class="paragraph">
<p><a id="gkpfj"></a><a id="GSADG00673"></a><a id="automatic-detection-of-installed-drivers"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_automatic_detection_of_installed_drivers">Automatic Detection of Installed Drivers</h5>
<div class="paragraph">
<p>The Administration Console detects installed JDBC Drivers automatically
when you create a JDBC connection pool. To create a JDBC connection pool
using the Administration Console, open the Resources component, open the
JDBC component, select Connection Pools, and click on the New button.
This displays the New JDBC Connection Pool page.</p>
</div>
<div class="paragraph">
<p>Based on the Resource Type and Database Vendor you select on the New
JDBC Connection Pool page, data source or driver implementation class
names are listed in the Datasource Classname or Driver Classname field
when you click on the Next button. When you choose a specific
implementation class name on the next page, additional properties
relevant to the installed JDBC driver are displayed in the Additional
Properties section.</p>
</div>
<div class="paragraph">
<p><a id="beamw"></a><a id="GSADG00579"></a><a id="configuration-specifics-for-jdbc-drivers"></a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_specifics_for_jdbc_drivers">Configuration Specifics for JDBC Drivers</h3>
<div class="paragraph">
<p>GlassFish Server is designed to support connectivity to any database
management system by using a corresponding JDBC driver. Configuration
information is provided for these JDBC drivers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#beanc">IBM DB2 Database Type 2 Driver</a></p>
</li>
<li>
<p><a href="#glhim">IBM DB2 Database Type 4 Driver</a></p>
</li>
<li>
<p><a href="#beamx">Apache Derby DB/Derby Type 4 Driver</a></p>
</li>
<li>
<p><a href="#gbsor">MySQL Server Database Type 4 Driver</a></p>
</li>
<li>
<p><a href="#beani">Oracle 10 Database Driver</a></p>
</li>
<li>
<p><a href="#beanh">Oracle 11 Database Driver</a></p>
</li>
<li>
<p><a href="#gjksj">PostgreSQL Type 4 Driver</a></p>
</li>
<li>
<p><a href="#beamy">DataDirect Type 4 Driver for IBM DB2 Database</a></p>
</li>
<li>
<p><a href="#beanj">DataDirect Type 4 Driver for IBM Informix</a></p>
</li>
<li>
<p><a href="#beana">DataDirect Type 4 Driver for Microsoft SQL Server
Database</a></p>
</li>
<li>
<p><a href="#gjksd">DataDirect Type 4 Driver for MySQL Server Database</a></p>
</li>
<li>
<p><a href="#beamz">DataDirect Type 4 Driver for Oracle 11 Database</a></p>
</li>
<li>
<p><a href="#beanb">DataDirect Type 4 Driver for Sybase Database</a></p>
</li>
<li>
<p><a href="#beane">Inet Oraxo Driver for Oracle Database</a></p>
</li>
<li>
<p><a href="#beanf">Inet Merlia Driver for Microsoft SQL Server Database</a></p>
</li>
<li>
<p><a href="#beang">Inet Sybelux Driver for Sybase Database</a></p>
</li>
<li>
<p><a href="#beand">JConnect Type 4 Driver for Sybase ASE 12.5 Database</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beanc"></a><a id="GSADG00749"></a><a id="ibm-db2-database-type-2-driver"></a></p>
</div>
<div class="sect3">
<h4 id="_ibm_db2_database_type_2_driver">IBM DB2 Database Type 2 Driver</h4>
<div class="paragraph">
<p>The JAR files for the DB2 driver are <code>db2jcc.jar</code>,
<code>db2jcc_license_cu.jar</code>, and <code>db2java.zip</code>. Set your environment
variables . For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">LD_LIBRARY_PATH=/usr/db2user/sqllib/lib:${Java EE.home}/lib
DB2DIR=/opt/IBM/db2/V8.2
DB2INSTANCE=db2user
INSTHOME=/usr/db2user
VWSPATH=/usr/db2user/sqllib
THREADS_FLAG=native</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configure the connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: DB2</p>
</li>
<li>
<p>DataSource Classname: <code>com.ibm.db2.jcc.DB2SimpleDataSource</code></p>
</li>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>databaseName</code> - Set as appropriate.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
<li>
<p><code>driverType</code> - Set to <code>2</code>.</p>
</li>
<li>
<p><code>deferPrepares</code> - Set to <code>false</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="glhim"></a><a id="GSADG00750"></a><a id="ibm-db2-database-type-4-driver"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_ibm_db2_database_type_4_driver">IBM DB2 Database Type 4 Driver</h4>
<div class="paragraph">
<p>The JAR file for the DB2 driver is <code>db2jcc.jar</code>. Configure the
connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: DB2</p>
</li>
<li>
<p>DataSource Classname: <code>com.ibm.db2.jcc.DB2SimpleDataSource</code></p>
</li>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>databaseName</code> - Set as appropriate.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
<li>
<p><code>driverType</code> - Set to <code>4</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beamx"></a><a id="GSADG00751"></a><a id="apache-derby-dbderby-type-4-driver"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_apache_derby_db_derby_type_4_driver">Apache Derby DB/Derby Type 4 Driver</h4>
<div class="paragraph">
<p>The Apache Derby DB/Derby JDBC driver is included with GlassFish Server
by default, so you do not need to integrate this JDBC driver with
GlassFish Server.</p>
</div>
<div class="paragraph">
<p>The JAR file for the Apache Derby DB driver is <code>derbyclient.jar</code>.
Configure the connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: Apache Derby</p>
</li>
<li>
<p>DataSource Classname: Specify one of the following:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>org.apache.derby.jdbc.ClientDataSource40
org.apache.derby.jdbc.ClientXADataSource40</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the host name or IP address of the database
server.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server if it
is different from the default.</p>
</li>
<li>
<p><code>databaseName</code> - Specify the name of the database.</p>
</li>
<li>
<p><code>user</code> - Specify the database user.<br>
This is only necessary if the Apache Derby database is configured to use
authentication. The Apache Derby database does not use authentication by
default. When the user is provided, it is the name of the schema where
the tables reside.</p>
</li>
<li>
<p><code>password</code> - Specify the database password.<br>
This is only necessary if the Apache Derby database is configured to use
authentication.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gbsor"></a><a id="GSADG00752"></a><a id="mysql-server-database-type-4-driver"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_mysql_server_database_type_4_driver">MySQL Server Database Type 4 Driver</h4>
<div class="paragraph">
<p>The JAR file for the MySQL driver is
<code>mysql-connector-java-5.1.14-bin.jar</code>. Configure the connection pool
using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: MySql</p>
</li>
<li>
<p>DataSource Classname:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>com.mysql.jdbc.jdbc2.optional.MysqlDataSource
com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the host name or IP address of the database
server.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server.</p>
</li>
<li>
<p><code>databaseName</code> - Set as appropriate.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beani"></a><a id="GSADG00753"></a><a id="oracle-10-database-driver"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_oracle_10_database_driver">Oracle 10 Database Driver</h4>
<div class="paragraph">
<p>The JAR file for the Oracle 10 database driver is <code>ojdbc14.jar</code>. Make
sure that the shared library is available through <code>LD_LIBRARY_PATH</code> and
that the <code>ORACLE_HOME</code> property is set.</p>
</div>
<div class="paragraph">
<p>To make the Oracle driver behave in a Java EE-compliant manner, you must
define the following JVM property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">-Doracle.jdbc.J2EE13Compliant=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configure the connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: Oracle</p>
</li>
<li>
<p>DataSource Classname: Specify one of the following:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>oracle.jdbc.pool.OracleDataSource
oracle.jdbc.xa.client.OracleXADataSource</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beanh"></a><a id="GSADG00754"></a><a id="oracle-11-database-driver"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_oracle_11_database_driver">Oracle 11 Database Driver</h4>
<div class="paragraph">
<p>The JAR file for the Oracle 11 database driver is <code>ojdbc6.jar</code>.</p>
</div>
<div class="paragraph">
<p>To make the Oracle driver behave in a Java EE-compliant manner, you must
define the following JVM property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">-Doracle.jdbc.J2EE13Compliant=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configure the connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: Oracle</p>
</li>
<li>
<p>DataSource Classname: Specify one of the following:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>oracle.jdbc.pool.OracleDataSource
oracle.jdbc.xa.client.OracleXADataSource</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.<br></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>For this driver, the <code>XAResource.recover</code> method repeatedly returns the
same set of in-doubt Xids regardless of the input flag. According to the
XA specifications, the Transaction Manager initially calls this method
with <code>TMSTARTSCAN</code> and then with <code>TMNOFLAGS</code> repeatedly until no Xids
are returned. The <code>XAResource.commit</code> method also has some issues.</p>
</div>
<div class="paragraph">
<p>To disable this GlassFish Server workaround, the
<code>oracle-xa-recovery-workaround</code> property value must be set to <code>false</code>.</p>
</div>
<div class="paragraph">
<p>Additionally, in order for the transaction manager to recover
transactions, the JDBC connection pool&#8217;s database user must be given
certain Oracle permissions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SELECT permission on DBA_PENDING_TRANSACTIONS, PENDING_TRANS$,
DBA_2PC_PENDING and DBA_2PC_NEIGHBORS.</p>
</li>
<li>
<p>EXECUTE permissions on DBMS_XA and DBMS_SYSTEM.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a id="gjksj"></a><a id="GSADG00755"></a><a id="postgresql-type-4-driver"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_postgresql_type_4_driver">PostgreSQL Type 4 Driver</h4>
<div class="paragraph">
<p>The JAR file for the PostgreSQL driver is
<code>postgresql-9.0-801.jdbc4.jar</code>. Configure the connection pool using the
following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: Postgresql</p>
</li>
<li>
<p>DataSource Classname: <code>org.postgresql.ds.PGSimpleDataSource</code></p>
</li>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the host name or IP address of the database
server.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server.</p>
</li>
<li>
<p><code>databaseName</code> - Set as appropriate.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beamy"></a><a id="GSADG00756"></a><a id="datadirect-type-4-driver-for-ibm-db2-database"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_datadirect_type_4_driver_for_ibm_db2_database">DataDirect Type 4 Driver for IBM DB2 Database</h4>
<div class="paragraph">
<p>The JAR file for DataDirect driver is <code>db2.jar</code>. Configure the
connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: DataDirect-DB2</p>
</li>
<li>
<p>DataSource Classname: <code>com.ddtek.jdbcx.db2.DB2DataSource</code></p>
</li>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the host name or IP address of the database
server.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server.</p>
</li>
<li>
<p><code>databaseName</code> - Set as appropriate.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beanj"></a><a id="GSADG00757"></a><a id="datadirect-type-4-driver-for-ibm-informix"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_datadirect_type_4_driver_for_ibm_informix">DataDirect Type 4 Driver for IBM Informix</h4>
<div class="paragraph">
<p>Configure the connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: DataDirect-Informix</p>
</li>
<li>
<p>DataSource Classname: Specify one of the following:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>com.informix.jdbcx.IfxDataSource
com.informix.jdbcx.IfxXADataSource</pre>
</div>
</div>
<div class="paragraph">
<p>DataDirect DataSource Classname:
<code>com.ddtek.jdbcx.informix.InformixDataSourcee</code>
* Properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the Informix database server name.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server.</p>
</li>
<li>
<p><code>databaseName</code> - Set as appropriate. This is optional.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
<li>
<p><code>IfxIFXHost</code> - Specify the host name or IP address of the database
server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beana"></a><a id="GSADG00758"></a><a id="datadirect-type-4-driver-for-microsoft-sql-server-database"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_datadirect_type_4_driver_for_microsoft_sql_server_database">DataDirect Type 4 Driver for Microsoft SQL Server Database</h4>
<div class="paragraph">
<p>The JAR file for the DataDirect driver is <code>sqlserver.jar</code>. Configure the
connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: DataDirect-Microsoft SQL Server</p>
</li>
<li>
<p>DataSource Classname: <code>com.ddtek.jdbcx.sqlserver.SQLServerDataSource</code></p>
</li>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the host name or IP address and the port of
the database server.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
<li>
<p><code>selectMethod</code> - Set to <code>cursor</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="gjksd"></a><a id="GSADG00759"></a><a id="datadirect-type-4-driver-for-mysql-server-database"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_datadirect_type_4_driver_for_mysql_server_database">DataDirect Type 4 Driver for MySQL Server Database</h4>
<div class="paragraph">
<p>The JAR file for the DataDirect driver is <code>mysql.jar</code>. Configure the
connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: DataDirect-MySQL</p>
</li>
<li>
<p>DataSource: <code>com.ddtek.jdbcx.mysql.MySQLDataSource</code></p>
</li>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the host name or IP address and the port of
the database server.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
<li>
<p><code>selectMethod</code> - Set to <code>cursor</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beamz"></a><a id="GSADG00760"></a><a id="datadirect-type-4-driver-for-oracle-11-database"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_datadirect_type_4_driver_for_oracle_11_database">DataDirect Type 4 Driver for Oracle 11 Database</h4>
<div class="paragraph">
<p>The JAR file for the DataDirect driver is <code>oracle.jar</code>.</p>
</div>
<div class="paragraph">
<p>To make the Oracle driver behave in a Java EE-compliant manner, you must
define the following JVM property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">-Doracle.jdbc.J2EE13Compliant=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configure the connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: DataDirect-Oracle</p>
</li>
<li>
<p>DataSource Classname: <code>com.ddtek.jdbcx.oracle.OracleDataSource</code></p>
</li>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the host name or IP address of the database
server.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beanb"></a><a id="GSADG00761"></a><a id="datadirect-type-4-driver-for-sybase-database"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_datadirect_type_4_driver_for_sybase_database">DataDirect Type 4 Driver for Sybase Database</h4>
<div class="paragraph">
<p>The JAR file for the DataDirect driver is <code>sybase.jar</code>. Configure the
connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: DataDirect-Sybase</p>
</li>
<li>
<p>DataSource Classname: <code>com.ddtek.jdbcx.sybase.SybaseDataSource</code></p>
</li>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the host name or IP address of the database
server.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server.</p>
</li>
<li>
<p><code>databaseName</code> - Set as appropriate. This is optional.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>In some situations, using this driver can cause exceptions to be thrown
because the driver creates a stored procedure for every parameterized
PreparedStatement by default. If this situation arises, add the property
<code>PrepareMethod</code>, setting its value to <code>direct</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a id="beane"></a><a id="GSADG00762"></a><a id="inet-oraxo-driver-for-oracle-database"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_inet_oraxo_driver_for_oracle_database">Inet Oraxo Driver for Oracle Database</h4>
<div class="paragraph">
<p>The JAR file for the Inet Oracle driver is <code>Oranxo.jar</code>. Configure the
connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: Oracle</p>
</li>
<li>
<p>DataSource Classname: <code>com.inet.ora.OraDataSource</code></p>
</li>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the host name or IP address of the database
server.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server.</p>
</li>
<li>
<p><code>user</code> - Specify the database user.</p>
</li>
<li>
<p><code>password</code> - Specify the database password.</p>
</li>
<li>
<p><code>serviceName</code> - Specify the URL of the database. The syntax is as
follows:<br></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>jdbc:inetora:server:port:dbname</pre>
</div>
</div>
<div class="paragraph">
<p>For example:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">jdbc:inetora:localhost:1521:payrolldb</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example,<code>localhost</code> is the name of the host running the Oracle
server, <code>1521</code> is the Oracle server&#8217;s port number, and <code>payrolldb</code> is
the SID of the database. For more information about the syntax of the
database URL, see the Oracle documentation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>streamstolob</code> - If the size of BLOB or CLOB data types exceeds 4 KB
and this driver is used for CMP, this property must be set to <code>true</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beanf"></a><a id="GSADG00763"></a><a id="inet-merlia-driver-for-microsoft-sql-server-database"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_inet_merlia_driver_for_microsoft_sql_server_database">Inet Merlia Driver for Microsoft SQL Server Database</h4>
<div class="paragraph">
<p>The JAR file for the Inet Microsoft SQL Server driver is <code>Merlia.jar</code>.
Configure the connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: MicrosoftSqlServer</p>
</li>
<li>
<p>DataSource Classname: <code>com.inet.tds.TdsDataSource</code></p>
</li>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the host name or IP address and the port of
the database server.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beang"></a><a id="GSADG00764"></a><a id="inet-sybelux-driver-for-sybase-database"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_inet_sybelux_driver_for_sybase_database">Inet Sybelux Driver for Sybase Database</h4>
<div class="paragraph">
<p>The JAR file for the Inet Sybase driver is <code>Sybelux.jar</code>. Configure the
connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: Sybase</p>
</li>
<li>
<p>DataSource Classname: <code>com.inet.syb.SybDataSource</code></p>
</li>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the host name or IP address of the database
server.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server.</p>
</li>
<li>
<p><code>databaseName</code> - Set as appropriate. Do not specify the complete URL,
only the database name.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="beand"></a><a id="GSADG00765"></a><a id="jconnect-type-4-driver-for-sybase-ase-12.5-database"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_jconnect_type_4_driver_for_sybase_ase_12_5_database">JConnect Type 4 Driver for Sybase ASE 12.5 Database</h4>
<div class="paragraph">
<p>The JAR file for the Sybase driver is <code>jconn4.jar</code>. Configure the
connection pool using the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: Use this name when you configure the JDBC resource later.</p>
</li>
<li>
<p>Resource Type: Specify the appropriate value.</p>
</li>
<li>
<p>Database Vendor: Sybase</p>
</li>
<li>
<p>DataSource Classname: Specify one of the following:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>com.sybase.jdbc4.jdbc.SybDataSource
com.sybase.jdbc4.jdbc.SybXADataSource</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>serverName</code> - Specify the host name or IP address of the database
server.</p>
</li>
<li>
<p><code>portNumber</code> - Specify the port number of the database server.</p>
</li>
<li>
<p><code>databaseName</code> - Set as appropriate. Do not specify the complete URL,
only the database name.</p>
</li>
<li>
<p><code>user</code> - Set as appropriate.</p>
</li>
<li>
<p><code>password</code> - Set as appropriate.</p>
</li>
<li>
<p><code>BE_AS_JDBC_COMPLIANT_AS_POSSIBLE</code> - Set to <code>true</code>.</p>
</li>
<li>
<p><code>FAKE_METADATA</code> - Set to <code>true</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>

<hr />

<table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
	<colgroup>
		<col width="12%"/>
		<col width="12%"/>
		<col width="*"/>
	</colgroup>
	<tr>		
		<td align="left">
		<a href="part-res-and-svcs-admin.html">
			<span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Previous</span>
		</a>
		</td>

		<td align="left">
		<a href="connectors.html">
			<span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Next</span>
		</a>
		</td>

		<td align="right">
		<a href="toc.html">
			<span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Contents</span>
		</a>
		</td>
	</tr>
</table>

<span id="copyright">
        <img src="img/eclipse_foundation_logo_tiny.png" height="20px" alt="Eclipse Foundation Logo" align="top"/>&nbsp;            
        <span >Copyright&nbsp;&copy;&nbsp;2019,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.</span>
</span>

<p align="center" class="beta">DRAFT</p>

</body>
</html>